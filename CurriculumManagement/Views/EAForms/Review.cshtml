@model CurriculumManagement.ViewModels.ReviewPageViewModel
@using CurriculumManagement.Models.POCO
@{
    ViewBag.Title = "EA Form Review";
}

<!DOCTYPE html>
<!--[if IEMobile 7]><html class="iem7 oldie" lang="en"><![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="ie7 oldie" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="ie8 oldie" lang="en"><![endif]-->
<!--[if (IE 9)&!(IEMobile)]><html class="ie9" lang="en"><![endif]-->
<!--[[if (gt IE 9)|(gt IEMobile 7)]><!-->
<html lang="en">
<!--<![endif]-->
<!--
 * UBC CLF (Common Look and Feel) v7.0.4
 * Copyright 2012-2013 The University of British Columbia
 * UBC Communications and Marketing
 * http://brand.ubc.ca/clf
 */
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Educational Activity Form | The University of British Columbia</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Stylesheets -->
    <link href="//cdn.ubc.ca/clf/7.0.4/css/ubc-clf-full.min.css" rel="stylesheet">
    @Styles.Render("~/Content/css")
    <!--[if lte IE 7]>
    <link href="https://cdn.ubc.ca/clf/7.0.4/css/font-awesome-ie7.css" rel="stylesheet">
    <![endif]-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="//cdn.ubc.ca/clf/7.0.4/img/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-57-precomposed.png">
    <!-- google analytics-->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-40343513-16', 'ubc.ca');
        ga('send', 'pageview');

    </script>

    <!-- end google analytics -->
    <script>
        function OnSuccess(result) {
            var action = result.split(':')[0];
            var msg = result.split(':')[1];
            if (action == 'submit') {
                $('#submit-button').attr('value', 'Submitted');
                $('#submit-button').prop("disabled", true);
                $('#save-button').prop("disabled", true);
                $('#search-button').prop("disabled", true);
            }
            if (action != 'search') {
                alert(msg);
            }
         
        }
        function OnFailure(ajaxContext) {
            var response = ajaxContext.get_response();
            var statusCode = response.get_statusCode();
            alert('Save attempt failed with code: ' + statusCode);
            //$('#targetDiv').empty();
        }
        /* not present in CLF, looking for alternative implementation*/
        $(document).ready(function(){
            $(".tooltip").tooltip({placement: 'right'});
        });
    </script>

</head>
<body>
    <div class="container">
        <!-- UBC Global Utility Menu -->
        <div class="collapse expand" id="ubc7-global-menu">
            <div id="ubc7-search" class="expand">
                <div id="ubc7-search-box">
                    <form class="form-search" method="get" action="http://www.ubc.ca/search/refine/" role="search">
                        <input type="text" name="q" placeholder="Search this website" class="input-xlarge search-query">
                        <input type="hidden" name="label" value="Search UBC" />
                        <input type="hidden" name="site" value="*.ubc.ca" />
                        <button type="submit" class="btn">Search</button>
                    </form>
                </div>
            </div>
            <div id="ubc7-global-header" class="expand">
                <!-- Global Utility Header from CDN -->
            </div>
        </div>
        <!-- End of UBC Global Utility Menu -->
        <!-- UBC Header -->
        <header id="ubc7-header" class="row-fluid expand" role="banner">
            <div class="span1">
                <div id="ubc7-logo">
                    <a href="http://www.ubc.ca">The University of British Columbia</a>
                </div>
            </div>
            <div class="span2">
                <div id="ubc7-apom">
                    <a href="//cdn.ubc.ca/clf/ref/aplaceofmind">UBC - A Place of Mind</a>
                </div>
            </div>
            <div class="span9" id="ubc7-wordmark-block">
                <div id="ubc7-wordmark">
                    <a href="http://www.ubc.ca">The University of British Columbia</a>
                </div>
                <div id="ubc7-global-utility">
                    <button type="button" data-toggle="collapse" data-target="#ubc7-global-menu"><span>UBC Search</span></button>
                    <noscript><a id="ubc7-global-utility-no-script" href="http://www.ubc.ca/">UBC Search</a></noscript>
                </div>
            </div>
        </header>
        <!-- End of UBC Header -->
        <!-- UBC Unit Identifier -->
        <div id="ubc7-unit" class="row-fluid expand">
            <div class="span12">
                <!-- Read more about Unit Name Treatment on http://brand.ubc.ca/clf -->
                <!-- No Faculty Treatment --><!--<div id="ubc7-unit-name" class="ubc7-single-element"> -->
                <div id="ubc7-unit-name">
                    <a href="/"><span id="ubc7-unit-faculty">Faculty of Medicine</span><span id="ubc7-unit-identifier">Curriculum Management Unit</span></a>
                </div>
            </div>
        </div>
        <!-- End of UBC Unit Identifier -->
        <!-- Content Area -->
        <div class="content expand" role="main">
            <div class="expand row-fluid content">
                <h2>Educational Activity Form</h2>

                    <div id="review-form">
                        @using (Ajax.BeginForm("Review", "EAForms", new AjaxOptions { OnSuccess = "OnSuccess", OnFailure = "OnFailure"}))
                        {
                            @Html.AntiForgeryToken()

                            <div class="form-horizontal review">
                                <p>Review, validate and/or update any missing or incorrect fields.</p><p> For assistance with completing the form refer to <a href="http://mednet.med.ubc.ca/teaching/curriculum-management/pages/default.aspx" target="_blank">Curriculum Management Mednet site</a>. Remember to submit your form or save it if you are not done.<br /> Contact <a href="mailto:curriculummanagement.medu@ubc.ca">Curriculum Management Unit</a> for any clarifications.</p>
                                <h4>Instructor Review for @Model.AcademicYear Academic Year</h4>
                                <hr />
                                @Html.ValidationSummary(true)
                                @Html.HiddenFor(model => model.ID)
                                @Html.HiddenFor(model => model.AcademicYear)
                                @Html.HiddenFor(model => model.StartDate)
                                @Html.HiddenFor(model => model.LastUpdated)
                                @Html.HiddenFor(model => model.LastSubmitted)
                                <div class="control-group">
                                    @Html.LabelFor(model => model.Course, new { @class = "control-label" })<span class="required">*</span>
                                    <div class="controls">
                                        @Html.EditorFor(model => model.Course)
                                        @Html.ValidationMessageFor(model => model.Course)
                                    </div>
                                </div>

                                <div class="control-group">
                                    @Html.LabelFor(model => model.BlockWeekTitle, new { @class = "control-label" })
                                    <div class="controls">
                                        @Html.EditorFor(model => model.BlockWeekTitle)
                                        @Html.ValidationMessageFor(model => model.BlockWeekTitle)
                                    </div>
                                </div>

                                <div class="control-group">
                                    @Html.LabelFor(model => model.ActivityTitle, new { @class = "control-label" })
                                    <div class="controls">
                                        @Html.EditorFor(model => model.ActivityTitle)
                                        @Html.ValidationMessageFor(model => model.ActivityTitle)
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-label-with-tooltip">@Html.LabelFor(model => model.ActivityTypesViewModel, new { @class = "control-label" })
                                        <a id="tooltip-objectives" title="Choose all that apply. Click [?] for guidance." href="https://mednet.med.ubc.ca/Teaching/curriculum-management/resources/Documents/AAMC%20Curriculum%20Inventory%20Standards.pdf" class="tooltip" target="_blank">[?]</a>
                                    </div>
                                    <div class="controls">
                                        <div class="available-activity-types">
                                            @Html.EditorFor(model => model.ActivityTypesViewModel)
                                        </div>
                                        <div class="selected-activity-types">
                                            @Html.ValidationMessageFor(model => model.ActivityTypesViewModel)
                                        </div>
                                    </div>
                                </div>

                                <div class="control-group facilitator-type">
                                    @Html.LabelFor(model => model.ActivityFacilitatorType, new { @class = "control-label" })
                                    <div class="controls">
                                        @Html.RadioButtonFor(m => m.ActivityFacilitatorType, "Instructor")Instructor&nbsp;&nbsp;
                                        @Html.RadioButtonFor(m => m.ActivityFacilitatorType, "Week Chair")Week Chair&nbsp;&nbsp;
                                        @Html.RadioButtonFor(m => m.ActivityFacilitatorType, "Course Director")Course Director&nbsp;&nbsp;
                                        @Html.RadioButtonFor(m => m.ActivityFacilitatorType, "Other")Other
                                        @*@Html.TextBoxFor(m => m.OtherActivityFacilitatorType)*@
                                        @Html.ValidationMessageFor(model => model.ActivityFacilitatorType)
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-label-with-tooltip">
                                        @Html.LabelFor(model => model.ActivityFacilitatorNames, new { @class = "control-label" })
                                    <a id="tooltip-objectives" title="List All Facilitators (first and last names)." class="tooltip">[?]</a>
                                </div>
                                    <div class="controls">
                                        @Html.EditorFor(model => model.ActivityFacilitatorNames)
                                        @Html.ValidationMessageFor(model => model.ActivityFacilitatorNames)
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-label-with-tooltip">
                                        @Html.LabelFor(model => model.ActivityFacilitatorDepartments, new { @class = "control-label" })<span class="required">*</span>
                                        <a id="tooltip-objectives" title="If there are multiple instructors from different departments, select Interdisciplinary." class="tooltip">[?]</a>
                                    </div>
                                    <div class="controls">
                                        @Html.DropDownListFor(x => x.ActivityFacilitatorDepartments,
                        new SelectList(DepartmentList.GetDepartments, "Value", "Text", Model.ActivityFacilitatorDepartments),
                        "Select Department")


                                        @Html.ValidationMessageFor(model => model.ActivityFacilitatorDepartments)
                                    </div>
                                </div>

                                <div class="control-group">
                                    @Html.LabelFor(model => model.LastSubmitted, new { @class = "control-label"})
                                    <div class="controls">
                                        @if (Model.LastSubmitted == null)
                                        {
                                            <p>No Record</p>
                                        }
                                        else
                                        {
                                            @Html.DisplayFor(model => model.LastSubmitted)
                                        }
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-label-with-tooltip">
                                        @Html.LabelFor(model => model.Abstract, new { @class = "control-label" })
                                        <a id="tooltip-abstract" title="Describe HOW the Learning Objective WHAT will be learned (max 10). Click [?] for guidance." href="https://mednet.med.ubc.ca/Teaching/curriculum-management/resources/Pages/Abstracts.aspx" class="tooltip" target="_blank">[?]</a>
                                    </div>
                                        <div class="controls">
                                            @Html.TextAreaFor(model => model.Abstract, new { rows = 10, @class = "textArea" })
                                            @Html.ValidationMessageFor(model => model.Abstract)
                                        </div>
</div>

                                <div class="control-group">
                                    <div class="control-label-with-tooltip">
                                        @Html.LabelFor(model => model.LearningObjectives, new { @class = "control-label" })<span class="required">*</span>
                                        <a id="tooltip-objectives" title="Describe WHAT will be learned (<= 10 ). Click [?] for guidance." href="https://mednet.med.ubc.ca/Teaching/curriculum-management/resources/Pages/Objectives.aspx" class="tooltip" target="_blank">[?]</a>
                                    </div>
                                    <div class="controls">
                                        @Html.TextAreaFor(model => model.LearningObjectives, new { rows = 10, @class = "textArea" })
                                        @Html.ValidationMessageFor(model => model.LearningObjectives)
                                    </div>
                                </div>
                                <div class="control-group">
                                    @Html.LabelFor(model => model.KeywordViewModel, new { @class = "control-label" })
                                    <div class="controls">
                                        @Html.EditorFor(model => model.KeywordViewModel)
                                        @Html.ValidationMessageFor(model => model.KeywordViewModel)
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-label-with-tooltip">
                                        @Html.LabelFor(model => model.ThemesViewModel, new { @class = "control-label" })
                                        <a id="tooltip-keywords" title="Select all that apply. Click [?] for guidance." href="https://mednet.med.ubc.ca/Teaching/curriculum-management/resources/Pages/UBC%20Themes.aspx" class="tooltip" target="_blank">[?]</a>
                                    </div>
                                    <div class="controls">
                                        @Html.EditorFor(model => model.ThemesViewModel)
                                        @Html.ValidationMessageFor(model => model.ThemesViewModel)
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="control-label-with-tooltip">
                                        @Html.LabelFor(model => model.FormularyViewModel, new { @class = "control-label" })
                                        <a id="tooltip-keywords" title="Select all that apply. Organized by Drug Class ~ Prototype. Click [?] for guidance." href="https://mednet.med.ubc.ca/Teaching/curriculum-management/resources/Pages/UBC-Formulary.aspx" class="tooltip" target="_blank">[?]</a>
                                    </div>
                                    <div class="controls">
                                        @Html.EditorFor(model => model.FormularyViewModel)
                                        @Html.ValidationMessageFor(model => model.FormularyViewModel)
                                    </div>
                                </div>

                                <div class="control-group">
                                    @Html.LabelFor(model => model.InstructorSignature, new { @class = "control-label" })<span class="required">*</span>
                                    <div class="controls">
                                        @Html.EditorFor(model => model.InstructorSignature)
                                        @Html.ValidationMessageFor(model => model.InstructorSignature)
                                    </div>
                                </div>

                                <div class="control-group">
                                    <div class="col-md-offset-2 controls">
                                        @if (Model.Status.Name == "Distributed" || Model.Status.Name == "Draft")
                                        {
                                            @*<input id="save-button" type="submit" value="Save Draft" name="Review:Save" class="btn btn-default" />
                                            <input id="submit-button" type="submit" value="Submit" name="Review:Submit" class="btn btn-default" />*@
                                             <input id="save-button" type="submit" value="Save Draft" name="Command" class="btn btn-default" />
                                            <input id="submit-button" type="submit" value="Submit" name="Command" class="btn btn-default" />
                                        }
                                        else
                                        {
                                            <input id="save-button" type="submit" value="Save Draft" class="btn btn-default" disabled="disabled" />
                                            <input id="submit-button" type="submit" value="Submitted" class="btn btn-default" disabled="disabled" />
                                        }
                                    </div>
                                </div>

                            </div>
                        }
                    </div>
</div>
        </div>
        <!-- End of Content Area -->
        <footer id="ubc7-footer" class="expand" role="contentinfo">
            <div class="row-fluid expand" id="ubc7-unit-footer">
                <div class="span10" id="ubc7-unit-address">
                    <div id="ubc7-address-unit-name">Curriculum Management Unit</div>
                    <div id="ubc7-address-faculty"><a href="http://med.ubc.ca">Faculty of Medicine</a></div>
                    <div id="ubc7-address-street">Room 8129 - 2775 Laurel Street</div>
                    <div id="ubc7-address-location">
                        <span id="ubc7-address-city">Vancouver</span>, <span id="ubc7-address-province">BC</span> <span id="ubc7-address-country">Canada</span> <span id="ubc7-address-postal">V5Z 1M9</span>
                    </div>
                    <div id="ubc7-address-phone">Tel 604 875 4111x69045</div>
                    <div id="ubc7-address-fax">Fax 604 875 5913</div>
                    <div id="ubc7-address-email">Email:<a href="mailto:curriculummanagement.medu@ubc.ca">curriculummanagement.medu@ubc.ca</a></div>
                </div>
                <div class="span2">

                </div>
            </div>
            <div class="row-fluid expand ubc7-back-to-top">
                <div class="span2">
                    <a href="#">Back to top <div class="ubc7-arrow up-arrow grey"></div></a>
                </div>
            </div>
            <div class="row-fluid expand" id="ubc7-global-footer">
                <div class="span5" id="ubc7-signature"><a href="http://www.ubc.ca/">The University of British Columbia</a></div>
                <div class="span7" id="ubc7-footer-menu">
                </div>
            </div>
            <div class="row-fluid expand" id="ubc7-minimal-footer">
                <div class="span12">
                    <ul>
                        <li><a href="//cdn.ubc.ca/clf/ref/emergency">Emergency Procedures</a> <span class="divider">|</span></li>
                        <li><a href="//cdn.ubc.ca/clf/ref/terms">Terms of Use</a> <span class="divider">|</span></li>
                        <li><a href="//cdn.ubc.ca/clf/ref/copyright">Copyright</a> <span class="divider">|</span></li>
                        <li><a href="//cdn.ubc.ca/clf/ref/accessibility">Accessibility</a></li>
                    </ul>
                </div>
            </div>
        </footer>
    </div> <!-- /container -->
    <!-- Placed javascript at the end for faster loading -->
    
    <script src="//cdn.ubc.ca/clf/7.0.4/js/ubc-clf.min.js"></script>
    @*<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>*@

</body>
</html>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}